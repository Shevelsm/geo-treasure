{% extends 'base.html' %} {% block content %}
<article id="map" class="map-content">
  {% block map %} {{ folium_map|safe }} {% endblock %}
</article>
<article class="result-content">
  <h2>Список интересных мест</h2>
  <section id="results" class="result-list">
    <p class="alert alert-info">
      Выбери интересующий кластер на карте
    </p>
    <!-- Points list for the clicked cluster is inserted here -->
  </section>
</article>
{% endblock %} {% block scripts %}
<!-- EventListener when message is recieved from Marker on click event -->
<script>
  $(document).ready(function() {
    console.log("Page ready!");
    window.addEventListener("message", function(e) {
      $.ajax({
        url: `/devajax/${e.data}`
      }).done(function(data) {
        $("#results").html(data);
      });
    });
  });
</script>
{% endblock %}
